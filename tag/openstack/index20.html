<!DOCTYPE html>
<html lang="en">
<head>
		<title>Odd Bits &mdash; Posts tagged openstack</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="http://blog-beta.oddbit.com/theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Odd Bits â€” Flux Atom"
			href="http://blog-beta.oddbit.com/" /> 
		<!--[if lte IE 8]><script src="http://blog-beta.oddbit.com/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background " >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="http://blog-beta.oddbit.com">Odd Bits</a></h1>
<h2 id="site-description">One of these things is not like the others</h2>		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives.html">archive</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://twitter.com/larsks">larsks@twitter</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://github.com/larsks">larsks@github</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://webchat.freenode.net/">larsks@freenode</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
<div class="page-title">
	<h2>Posts tagged with <span>openstack</span> &hellip;</h2>
</div>
		</div>
	
		<div id="contents">
<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://blog-beta.oddbit.com/2013/10/28/why-does-the-neutron/">Mon 28 October 2013</a></div>
		<span class="byline">By <a href="http://blog-beta.oddbit.com/author/lars-kellogg-stedman.html">Lars Kellogg-Stedman</a></span>
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://blog-beta.oddbit.com/tag/networking/index.html" rel="tag">networking</a>,  <a href="http://blog-beta.oddbit.com/tag/neutron/index.html" rel="tag">neutron</a>,  <a href="http://blog-beta.oddbit.com/tag/openstack/index.html" rel="tag">openstack</a>    		</span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://blog-beta.oddbit.com/2013/10/28/why-does-the-neutron/" title="Permalink to Why does the Neutron documentation recommend three interfaces?" rel="bookmark">Why does the Neutron documentation recommend three interfaces?</a>
		</h2>
		<div class="entry-content">
			<p>The <a href="http://docs.openstack.org/havana/install-guide/install/yum/content/neutron-install.dedicated-network-node.html">documentation for configuring Neutron</a> recommends
that a network controller has three physical interfaces:</p>
<blockquote>
<p>Before you start, set up a machine to be a dedicated network node.
Dedicated network nodes should have the following NICs: the
management NIC (called MGMT_INTERFACE), the data NIC (called
DATA_INTERFACE), and the external NIC (called EXTERNAL_INTERFACE).</p>
</blockquote>
<p>People occasionally ask, "why three interfaces? What if I only have
two?", so I wanted to provide an extended answer that might help
people understand what the interfaces are for and what trade-offs are
involved in using fewer interfaces.</p>
<!-- more -->

<p>The <code>MGMT_INTERFACE</code> is used for communication between nodes.  This
can include traffic from services to the messaging server (<code>qpid</code>,
<code>rabbitmq</code>, etc), traffic between nova and neutron, connections to the
database, and other traffic used to manage your OpenStack environment.</p>
<p>The <code>DATA_INTERFACE</code> is used for instance traffic...that is, traffic
generated by or inbound to instances running in your OpenStack
environment.  If you are using GRE or VXLAN tunnels your tunnel
endpoints will be associated with this interface.</p>
<p>The <code>EXTERNAL_INTERFACE</code> is used to provide public access to your
instances.  The network attached to this interface is generally open
to external traffic, and ip addresses are managed by the floating-ip
functionality in Neutron or Nova.</p>
<ul>
<li>
<p>You want your <code>MGMT_INTERFACE</code> seperate from your <code>DATA_INTERFACE</code>
  in order to avoid accidentally granting management access to your
  OpenStack hosts to your tenants.  A typical OpenStack environment
  may not use authentication in all cases, and a tenant host with
  access to the management network could intentionally or accidentally
  cause problems.</p>
</li>
<li>
<p>You want your <code>EXTERNAL_INTERFACE</code> separate from your
  <code>DATA_INTERFACE</code> because your network controller <em>must</em> be acting as
  a router between these two interfaces in order for the netfilter
  <code>PREROUTING</code> and <code>POSTROUTING</code> rules to activate.  These rules are
  used to map floating ip addresses to internal addresses via <code>SNAT</code>
  and <code>DNAT</code> rules, which only work packets traverse the <code>FORWARD</code>
  chain.</p>
</li>
<li>
<p>You want your <code>MGMT_INTERFACE</code> separate from your
  <code>EXTERNAL_INTERFACE</code> because they have dramatically different access
  requirements.  Your <code>MGMT_INTERFACE</code> should typically only be
  available to other hosts in your OpenStack deployment, while your
  <code>EXTERNAL_INTERFACE</code> will generally require much broader access.</p>
</li>
</ul>
<p>If you are deploying a proof-of-concept (POC) deployment to which you
are not actually providing public access, you can elect to not have an
<code>EXTERNAL_INTERFACE</code>. Rather than adding this device to <code>br-ex</code>, you
will set up outbound NAT rules so that "external" traffic from your
instances will masquerade using the primary ip address of your network
controller.</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="navigation">
		<div class="nav-previous">
				<a href="http://blog-beta.oddbit.com/tag/openstack/index19.html">
			<span class="meta-nav">&larr;</span> Newer posts</a>
		</div>		
		<div class="nav-next"><a href="http://blog-beta.oddbit.com/tag/openstack/index21.html" >Older posts <span class="meta-nav">&rarr;</span></a></div>
</div>
		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>